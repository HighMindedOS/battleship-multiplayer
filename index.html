<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Battleship Multiplayer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Video Background -->
    <video autoplay muted loop id="bgVideo">
        <source src="background.mp4" type="video/mp4">
    </video>
    <div class="glass-overlay"></div>

    <!-- Game Container -->
    <div class="game-container">
        <!-- Settings Icon (Bottom Right) -->
        <div class="settings-icon" id="settingsIcon">
            <img src="opt.ico" alt="Settings" width="32" height="32">
        </div>

        <!-- Settings Popup -->
        <div id="settingsPopup" class="popup-overlay">
            <div class="popup-content">
                <h2>Einstellungen</h2>
                <div class="settings-section">
                    <h3>Verbindungsstatus</h3>
                    <div class="connection-info">
                        <span class="status-dot"></span>
                        <span class="status-text">Offline</span>
                    </div>
                </div>
                <div class="settings-section">
                    <h3>Lautst√§rke</h3>
                    <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="50">
                    <span id="volumeValue">50%</span>
                </div>
                <button class="close-popup" id="closeSettings">Schlie√üen</button>
            </div>
        </div>

        <!-- Lobby Screen -->
        <div id="lobbyScreen" class="screen active">
            <div class="lobby-logo">
                <img src="logo.png" alt="Battleship Multiplayer" class="game-logo">
            </div>
            
            <div class="lobby-sections">
                <!-- Create Game -->
                <div class="lobby-card">
                    <h2>üîó Neues Spiel erstellen</h2>
                    <input type="text" id="playerName" placeholder="Dein Name" maxlength="20">
                    <button id="createLobbyBtn">Lobby erstellen</button>
                </div>

                <!-- Join Game -->
                <div class="lobby-card">
                    <h2>üîå Einem Spiel beitreten</h2>
                    <input type="text" id="joinPlayerName" placeholder="Dein Name" maxlength="20">
                    <input type="text" id="lobbyCode" placeholder="Lobby Code" maxlength="6">
                    <button id="joinLobbyBtn">Beitreten</button>
                </div>
            </div>
        </div>

        <!-- Waiting Screen -->
        <div id="waitingScreen" class="screen">
            <div class="waiting-content">
                <h2>Lobby</h2>
                
                <div class="lobby-code-box" id="copyLobbyCode">
                    <div id="lobbyCodeDisplay"></div>
                    <div class="copy-hint">Klicken zum Kopieren</div>
                </div>
                
                <div class="players-list" id="playersList">
                    <!-- Players will be added dynamically -->
                </div>
                
                <button id="leaveLobbyBtn" class="secondary-btn">Lobby verlassen</button>
            </div>
        </div>

        <!-- Ship Placement Screen -->
        <div id="placementScreen" class="screen">
            <div class="placement-container">
                <div class="placement-left edge-card">
                    <h3>Verf√ºgbare Schiffe</h3>
                    <div id="availableShips" class="available-ships">
                        <!-- Ships will be added dynamically -->
                    </div>
                    
                    <div class="placement-controls">
                        <button id="rotateBtn" class="control-btn">[R] Rotieren</button>
                        <div class="placement-actions">
                            <button id="randomPlaceBtn" class="icon-only-btn" title="Zuf√§llig platzieren">üé≤</button>
                            <button id="clearBoardBtn" class="icon-only-btn" title="Grid leeren">üóëÔ∏è</button>
                            <button id="readyBtn" class="ready-btn" disabled>Ready</button>
                        </div>
                    </div>
                </div>
                
                <div class="placement-center">
                    <div class="placement-grid-wrapper">
                        <div id="placementGrid" class="game-grid"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-layout">
                <!-- Left: Player Controls -->
                <div class="game-sidebar left edge-card">
                    <!-- Energy Display -->
                    <div class="energy-display">
                        <span class="energy-icon">‚ö°</span>
                        <span id="energyText">0/10</span>
                    </div>
                    
                    <!-- Powerups -->
                    <div class="powerups-section">
                        <h3>Powerups</h3>
                        <div class="powerup-buttons">
                            <button class="powerup-btn" id="mineBtn" data-cost="2">
                                <span class="powerup-icon">üí£</span>
                                <span>Mine (2‚ö°)</span>
                            </button>
                            <button class="powerup-btn" id="radarBtn" data-cost="3">
                                <span class="powerup-icon">üì°</span>
                                <span>Radar (3‚ö°)</span>
                            </button>
                            <button class="powerup-btn" id="cannonBtn" data-cost="5">
                                <span class="powerup-icon">üéØ</span>
                                <span>Gesch√ºtz (5‚ö°)</span>
                            </button>
                            <button class="powerup-btn" id="torpedoBtn" data-cost="9">
                                <span class="powerup-icon">üöÄ</span>
                                <span>Torpedo (9‚ö°)</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ships Status -->
                    <div class="ships-status-header">Deine Schiffe</div>
                    <div id="playerShipsStatus" class="ships-display"></div>
                    
                    <button id="surrenderBtn" class="surrender-btn">Aufgeben</button>
                </div>

                <!-- Center: Game Boards -->
                <div class="game-center">
                    <div class="boards-container">
                        <!-- Enemy Board (Top) -->
                        <div class="board-section">
                            <h3 id="enemyName">Gegner</h3>
                            <div id="enemyGrid" class="game-grid enemy-board"></div>
                        </div>
                        
                        <!-- Player Board (Bottom) -->
                        <div class="board-section">
                            <h3>Dein Feld</h3>
                            <div id="playerGrid" class="game-grid"></div>
                        </div>
                    </div>
                </div>

                <!-- Right: Stats & Turn Control -->
                <div class="game-sidebar right edge-card">
                    <!-- Enemy Ships -->
                    <div class="ships-status-header enemy-ships-header">Gegner Schiffe</div>
                    <div id="enemyShipsStatus" class="ships-display"></div>
                    
                    <!-- Stats -->
                    <h3>Statistik</h3>
                    <div class="stats">
                        <div class="stat-item">
                            <span>Sch√ºsse:</span>
                            <span id="shotCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Treffer:</span>
                            <span id="hitCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Versenkt:</span>
                            <span id="sunkCount">0</span>
                        </div>
                        <div class="stat-item">
                            <span>Minen:</span>
                            <span id="mineCount">0</span>
                        </div>
                    </div>
                    
                    <!-- End Turn Button -->
                    <button id="endTurnBtn" class="end-turn-btn" disabled>Zug beenden</button>
                </div>
            </div>
        </div>

        <!-- Game Over Screen -->
        <div id="gameOverScreen" class="screen">
            <div class="gameover-content">
                <div id="winnerIcon" class="winner-icon"></div>
                <h1 id="winnerText"></h1>
                <div id="finalStats" class="final-stats"></div>
                <button id="newGameBtn">Neues Spiel</button>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notifications" class="notifications"></div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-database-compat.js"></script>
    <script src="script.js"></script>
</body>
</html>
